
# metaball

works/chunk/path4-s4.wgsl (line 14) のポリノミアル smin を「距離を縮める側」にチューニングすると飛び越しが減ります。k を現在の 0.9 から小さくする（例: 0.3–0.5）か、smin 実装内の (h*h*0.25*k) を大きめにして距離をより減衰させると、ブレンド部の擬似距離が実距離に近づきステップが飛びにくくなります。

さらに安定させたい場合は stepScale を導入して t = t + dist * 0.8; のように距離に係数をかける方法もあります。tryDistanceFieldObject 内での前進量を意図的に控えめにし、オーバーステップを抑制します。

根本対応として「実際のサイン距離により近い」スムーズミンを使うのも有効です。例えば Inigo Quilez の exponential smooth minimum exp(-k*a) 系や、ハーモニック平均を用いるブレンドは距離の過大評価が少ないので、ブレンド角度に依存した空洞を作りにくくなります。

どの方法でも、tryDistanceFieldObject の maxSteps を必要に応じて増やす（例: 80）・epsilon をやや大きくする（例: 0.0005）と、細いネックを逃しにくくなるので併用するとより安定します。